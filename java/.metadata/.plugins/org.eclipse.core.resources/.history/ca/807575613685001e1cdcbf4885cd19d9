package com.bstn.zplviewer.graphics;

import java.io.File;
import java.util.ArrayList;

import com.bstn.zplviewer.renderables.Code128Barcode;
import com.bstn.zplviewer.renderables.Graphic;
import com.bstn.zplviewer.renderables.Rectangle;
import com.bstn.zplviewer.renderables.Renderable;
import com.bstn.zplviewer.renderables.Text;
import com.bstn.zplviewer.util.PDFUtil;

public abstract class Renderer {
	private ArrayList<Renderable> queue;

    public Renderer() {
        queue = new ArrayList<>();
    }
    
    public abstract void drawText(Text text);
	public abstract void drawRectangle(Rectangle rectangle);
	public abstract void drawCode128Barcode(Code128Barcode code128Barcode);
	public abstract void drawGraphic(Graphic graphic);
	public abstract boolean save(File file);

    /**
     * Adds a Renderable element to the end of the render queue.
     *
     * @param renderable The Renderable object to be added to the queue.
     */
    public void addElement(Renderable renderable) {
        queue.add(renderable);
    }

    /**
     * Renders each Renderable object in the queue using the provided Renderer.
     *
     * @param renderer The Renderer used to render each element in the queue.
     */
    public void render(Renderer renderer, File file) {
        for (Renderable renderable : queue) {
            renderable.render(renderer);
        }
        
        if(renderer.save(file)) {
        	PDFUtil.open(file);
        }
    }

	@Override
	public String toString() {
		return "RenderQueue [queue=" + queue + "]";
	}
}
